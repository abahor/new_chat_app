{# % extends "main.html" % #}
{# % block links % #}
<link rel="stylesheet" href="/static/css/3.0.3.css">
<link rel="stylesheet" href="/static/css/font-awesome.min.css">
<link rel="stylesheet" href="/static/css/chat_tab.css">
{# % endblock % #}
{% block content %}
<body>
<input value="{{ current_user.id }}" hidden id="user">
<!--<input hidden id="token" value="{{ a }}">-->
<!--<input hidden id="time" value="{{today_date}}">-->
<div class="container">

                 <div class="col-sm-8">
                  <div class="chatbody">
                  <div class="panel panel-primary">
                <div class="panel-heading top-bar">
                    <div class="col-md-8 col-xs-8">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span> Chat - {{ current_user.username }}</h3>
                    </div>
                    <a style="color:white"><p style="float:right">Go back</p></a>
                </div>
                <div id="panel-body" class="panel-body msg_container_base">

                {% for i in messages %}
                    {% if i.SenderID != current_user.id %}
                  <div id="receive">
                    <div class="row msg_container base_sent">
                        <div class="col-md-10 col-xs-10">
                            <div class="messages msg_sent">
                                <p class="subject">{{ i.text }}</p>
                                <time class="current_date" datetime="2009-11-13T20:00"></time>
                            </div>
                        </div>
                    </div>
                  </div>
                    {% else  %}
                  <div id="sent">
                    <div class="row msg_container base_receive">
                        <div class="col-md-10 col-xs-10">
                            <div class="messages msg_receive">
                                <p class="subject">{{ i.text }}</p>
                                <time class="current_date"></time>
                            </div>
                        </div>
                    </div>
                  </div>
                    {% endif %}
                {% endfor %}

                    <template id="receive-template">
                    <div class="row msg_container base_sent">
                        <div class="col-md-10 col-xs-10">
                            <div class="messages msg_sent">
                                <p class="subject"></p>
                                <time class="current_date" datetime="2009-11-13T20:00"></time>
                            </div>
                        </div>
                    </div>
                  </template>


                    <template id="sent-template">
                    <div class="row msg_container base_receive">
                        <div class="col-md-10 col-xs-10">
                            <div class="messages msg_receive">
                                <p class="subject"></p>
                                <time class="current_date"></time>
                            </div>
                        </div>
                    </div>
                  </template>

                </div>
                <div class="panel-footer">
                    <div class="input-group">
                        <input id="btn-input" type="text" class="form-control input-sm chat_input" placeholder="Write your message here..." />
                        <span class="input-group-btn">
                        <button class="btn btn-primary btn-sm" id="btn-chat"><i class="fa fa-send fa-1x" aria-hidden="true"></i></button>
                        </span>
                    </div>
                </div>
    		</div>

                 </div>
             </div>
</div>
<script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="/static/js/chat_tab.js" ></script>
</body>
{% endblock %}